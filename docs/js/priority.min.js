"use strict";window.GIDA=window.GIDA??{},window.GIDA.menu_priority=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="gida-menu-priority",s=n+"-panels",o=n+"-panel",l=n+"-button",i="current",r="ready",a="hover",c="active",d="opened",u=t?document.getElementById(t):document.getElementsByClassName(n)[0];if(!u)return;const f=u.querySelector(".menu")??u.getElementsByTagName("ul")[0];if(!f)return;const p=Array.from(f.querySelectorAll(":scope > li")),m=getComputedStyle(f),g=e.autoClose??!0,h=e.reversed??!1,L=e.buttonPosition??"end",v=S(p,h);let E=0,w=0;const y=[],b=[];function C(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&t(),y.push(B(t))}function N(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&t(),b.push(B(t))}const A=[];function W(){const t=new ResizeObserver((t=>{for(const e of t)I(e.target)}));for(const e of A)t.observe(e),e.addEventListener("scroll",B((()=>{I(e)})))}function I(t){if(t.scrollWidth-t.clientWidth>2){const e=t.scrollLeft/(t.scrollWidth-t.clientWidth);t.classList[e<.95?"add":"remove"]("scrollable-right"),t.classList[.05<e?"add":"remove"]("scrollable-left")}else t.classList.remove("scrollable-right"),t.classList.remove("scrollable-left")}function T(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const l=t=>{if("mouse"===t.pointerType&&!t.target.classList.contains(e)&&(t.target.classList.add(n),o))for(let e=t.target.parentElement;e&&e!==s;e=e.parentElement)e.classList.contains(n)&&e.classList.add(o)},i=t=>{if("mouse"===t.pointerType&&!t.target.classList.contains(e)&&(t.target.classList.remove(n),o))for(let e=t.target.parentElement;e&&e!==s;e=e.parentElement)e.classList.contains(n)&&e.classList.remove(o)};for(const e of t)e.addEventListener("pointerenter",l),e.addEventListener("pointerleave",i)}function B(t){let e;function n(){e=!1,t()}return()=>{e||(e=!0,requestAnimationFrame(n))}}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const t of y)t()}),{passive:!0}),window.addEventListener("scroll",(()=>{for(const t of b)t()}),{passive:!0}),W()}));const[G,k]=F(u),[D,O]=x(f);"end"===L?f.append(D):"start"===L&&f.prepend(D),O.addEventListener("click",(t=>{D.classList.contains(d)?z(D,G):M(D,G),t.stopPropagation()}));for(const t of p)t.addEventListener("click",(()=>{z(D,G)}));T(p,i,a);let R=[];function S(t,e){const n=new Array(t.length);for(let e=0;e<t.length;e+=1)n[e]=q(t[e],t.length-e);const s=new Array(t.length);for(let e=0;e<t.length;e+=1)s[e]=e;return s.sort(((t,e)=>n[t]<n[e]?1:n[t]>n[e]?-1:0)),e&&s.reverse(),s}function q(t,e){const n=t.className.split(" ");let s=null;for(const t of n){const e=parseInt(t,10);isNaN(e)||(null===s||s<e)&&(s=e)}return s??e}function F(t){const e=document.createElement("div");e.classList.add(s);const n=document.createElement("div");n.classList.add(o),"end"!==L&&"start"!==L||n.classList.add("end"===L?"end":"start");const l=document.createElement("ul");return l.classList.add("menu"),n.appendChild(l),e.appendChild(n),t.appendChild(e),[n,l]}function x(t){const e=document.createElement("button");e.classList.add(l);const n=document.createElement("li");return n.appendChild(e),t.appendChild(n),[n,e]}function z(t,e){t.classList.remove(d),e.classList.remove(c),setTimeout((()=>{e.classList.remove(d)}),400)}function M(t,e){t.classList.add(d),e.classList.add(c),setTimeout((()=>{e.classList.add(d)}),0),E=window.pageYOffset}function P(t,e){const n=e.getBoundingClientRect();(n.bottom<0||0<n.top&&n.bottom<Math.abs(window.pageYOffset-E))&&z(t,e)}function Y(t){const e=t.parentElement,n=getComputedStyle(e),s=e.clientWidth-(parseFloat(n.paddingLeft)+parseFloat(n.paddingRight));t.style.maxWidth=s+"px"}function _(t,e,n,s,o){e.style.width="0";let l=e.parentElement.getBoundingClientRect().width;e.style.width=null;const[i,r]=j(l,t,s,o,w);o.style.display=r?null:"none";for(let n=0;n<s.length;n+=1)i[n]&&(s[n].parentElement===e&&(t[n]=s[n].offsetWidth),"end"===L?e.insertBefore(s[n],o):"start"===L&&e.appendChild(s[n],o));w=parseInt(m.columnGap,10),w=Number.isNaN(w)?0:w;for(let t=0;t<s.length;t+=1)i[t]||n.appendChild(s[t])}function j(t,e,n,s,o){const l=new Array(n.length);l.fill(!0);const i=e.reduce(((t,e)=>t+e))+o*(e.length-1);if(t<i){t-=s.clientWidth;let i=n.length;for(let s=0;s<n.length;s+=1)if((t-=e[v[s]]+o)<0){i=s;break}for(let t=i;t<n.length;t+=1)l[v[t]]=!1}return[l,t<i]}setTimeout((()=>{R=p.map((t=>t.offsetWidth)),w=parseInt(m.columnGap,10),w=Number.isNaN(w)?0:w,_(R,f,k,p,D),C((()=>{z(D,G),Y(u),_(R,f,k,p,D)}))}),10),setTimeout((()=>{u.classList.add(r)}),100),g&&(N((()=>{P(D,G)})),document.addEventListener("click",(()=>{z(D,G)})))};
//# sourceMappingURL=priority.min.js.map