"use strict";window.GIDA=window.GIDA??{},window.GIDA.menu_priority=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="gida-menu-priority",s=n+"-panels",o=n+"-panel",l=n+"-button",i="current",r="ready",a="hover",c="active",d="opened",u="--max-width",f="--foldable",p=e?document.getElementById(e):document.getElementsByClassName(n)[0];if(!p)return;const m=p.querySelector(".menu")??p.getElementsByTagName("ul")[0];if(!m)return;const g=Array.from(m.querySelectorAll(":scope > li")),h=getComputedStyle(m),L=t.autoClose??!0,v=t.reversed??!1,y=t.buttonPosition??"end",E=q(g,v);let w=0,b=0;const C=[],N=[];function A(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&e(),C.push(S(e))}function W(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&e(),N.push(S(e))}const I=[];function T(){const e=new ResizeObserver((e=>{for(const t of e)B(t.target)}));for(const t of I)e.observe(t),t.addEventListener("scroll",S((()=>{B(t)})))}function B(e){if(e.scrollWidth-e.clientWidth>2){const t=e.scrollLeft/(e.scrollWidth-e.clientWidth);e.classList[t<.95?"add":"remove"]("scrollable-right"),e.classList[.05<t?"add":"remove"]("scrollable-left")}else e.classList.remove("scrollable-right"),e.classList.remove("scrollable-left")}function G(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const l=e=>{if("mouse"===e.pointerType&&!e.target.classList.contains(t)&&(e.target.classList.add(n),o))for(let t=e.target.parentElement;t&&t!==s;t=t.parentElement)t.classList.contains(n)&&t.classList.add(o)},i=e=>{if("mouse"===e.pointerType&&!e.target.classList.contains(t)&&(e.target.classList.remove(n),o))for(let t=e.target.parentElement;t&&t!==s;t=t.parentElement)t.classList.contains(n)&&t.classList.remove(o)};for(const t of e)t.addEventListener("pointerenter",l),t.addEventListener("pointerleave",i)}function S(e){let t;function n(){t=!1,e()}return()=>{t||(t=!0,requestAnimationFrame(n))}}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const e of C)e()}),{passive:!0}),window.addEventListener("scroll",(()=>{for(const e of N)e()}),{passive:!0}),T()}));const[k,D]=x(p),[O,P]=z(m);"end"===y?m.append(O):"start"===y&&m.prepend(O),P.addEventListener("click",(e=>{O.classList.contains(d)?M(O,k):Y(O,k),e.stopPropagation()}));for(const e of g)e.addEventListener("click",(()=>{M(O,k)}));G(g,i,a);let R=[];function q(e,t){const n=new Array(e.length);for(let t=0;t<e.length;t+=1)n[t]=F(e[t],e.length-t);const s=new Array(e.length);for(let t=0;t<e.length;t+=1)s[t]=t;return s.sort(((e,t)=>n[e]<n[t]?1:n[e]>n[t]?-1:0)),t&&s.reverse(),s}function F(e,t){const n=e.className.split(" ");let s=null;for(const e of n){const t=parseInt(e,10);isNaN(t)||(null===s||s<t)&&(s=t)}return s??t}function x(e){const t=document.createElement("div");t.classList.add(s);const n=document.createElement("div");n.classList.add(o),"end"!==y&&"start"!==y||n.classList.add("end"===y?"end":"start");const l=document.createElement("ul");return l.classList.add("menu"),n.appendChild(l),t.appendChild(n),e.appendChild(t),[n,l]}function z(e){const t=document.createElement("button");t.classList.add(l);const n=document.createElement("li");return n.appendChild(t),e.appendChild(n),[n,t]}function M(e,t){e.classList.remove(d),t.classList.remove(c),setTimeout((()=>{t.classList.remove(d)}),400)}function Y(e,t){e.classList.add(d),t.classList.add(c),setTimeout((()=>{t.classList.add(d)}),0),w=window.pageYOffset}function V(e,t){const n=t.getBoundingClientRect();(n.bottom<0||0<n.top&&n.bottom<Math.abs(window.pageYOffset-w))&&M(e,t)}function $(e){const t=e.parentElement,n=getComputedStyle(t),s=t.clientWidth-(parseFloat(n.paddingLeft)+parseFloat(n.paddingRight));e.style.setProperty(u,`${s}px`)}function _(e,t,n,s,o){t.style.width="0";let l=t.parentElement.getBoundingClientRect().width;t.style.width=null;const[i,r]=j(l,e,s,o,b);o.style.display=r?null:"none","false"===getComputedStyle(t).getPropertyValue(f).trim()&&(i.fill(!0),o.style.display="none");for(let n=0;n<s.length;n+=1)i[n]&&(s[n].parentElement===t&&(e[n]=s[n].offsetWidth),"end"===y?t.insertBefore(s[n],o):"start"===y&&t.appendChild(s[n],o));b=parseInt(h.columnGap,10),b=Number.isNaN(b)?0:b;for(let e=0;e<s.length;e+=1)i[e]||n.appendChild(s[e])}function j(e,t,n,s,o){const l=new Array(n.length);l.fill(!0);const i=t.reduce(((e,t)=>e+t))+o*(t.length-1);if(e<i){e-=s.clientWidth;let i=n.length;for(let s=0;s<n.length;s+=1)if((e-=t[E[s]]+o)<0){i=s;break}for(let e=i;e<n.length;e+=1)l[E[e]]=!1}return[l,e<i]}setTimeout((()=>{R=g.map((e=>e.offsetWidth)),b=parseInt(h.columnGap,10),b=Number.isNaN(b)?0:b,_(R,m,D,g,O),A((()=>{M(O,k),$(p),_(R,m,D,g,O)}))}),10),setTimeout((()=>{p.classList.add(r)}),100),L&&(W((()=>{V(O,k)})),document.addEventListener("click",(()=>{M(O,k)})))};
//# sourceMappingURL=priority.min.js.map