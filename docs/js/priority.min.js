"use strict";window.GIDA=window.GIDA??{},window.GIDA.menu_priority=function(e,t){const n="gida-menu-priority",s="active",o="opened",i=e?document.getElementById(e):document.getElementsByClassName(n)[0];if(!i)return;const l=i.querySelector(".menu")??i.getElementsByTagName("ul")[0],c=Array.from(l.querySelectorAll("li")),d=t.autoClose??!0;let a=0;const r=[],u=[];const m=[];function f(e){if(e.scrollWidth-e.clientWidth>2){const t=e.scrollLeft/(e.scrollWidth-e.clientWidth);e.classList[t<.95?"add":"remove"]("scrollable-right"),e.classList[.05<t?"add":"remove"]("scrollable-left")}else e.classList.remove("scrollable-right"),e.classList.remove("scrollable-left")}function p(e){let t;function n(){t=!1,e()}return()=>{t||(t=!0,requestAnimationFrame(n))}}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const e of r)e()}),{passive:!0}),window.addEventListener("scroll",(()=>{for(const e of u)e()}),{passive:!0}),function(){const e=new ResizeObserver((e=>{for(const t of e)f(t.target)}));for(const t of m)e.observe(t),t.addEventListener("scroll",p((()=>{f(t)})))}()}));const[L,h]=function(e){const t=document.createElement("div");t.classList.add("gida-menu-priority-panels");const n=document.createElement("div");n.classList.add("gida-menu-priority-panel");const s=document.createElement("ul");return s.classList.add("menu"),n.appendChild(s),t.appendChild(n),e.appendChild(t),[n,s]}(i),[g,v]=function(e){const t=document.createElement("button");t.classList.add("gida-menu-priority-button");const n=document.createElement("li");return n.appendChild(t),e.appendChild(n),[n,t]}(l);l.appendChild(g),v.addEventListener("click",(e=>{g.classList.contains(o)?w(g,L):function(e,t){e.classList.add(o),t.classList.add(s),setTimeout((()=>{t.classList.add(o)}),0),a=window.pageYOffset}(g,L),e.stopPropagation()}));for(const e of c)e.addEventListener("click",(()=>{w(g,L)}));let E=[];function w(e,t){e.classList.remove(o),t.classList.remove(s),setTimeout((()=>{t.classList.remove(o)}),400)}function y(e,t,n,s,o){let i=t.parentElement.getBoundingClientRect().width,l=s.length;const c=o.clientWidth;if(i<e.reduce(((e,t)=>e+t))){i-=c;for(let t=0;t<e.length;t+=1)if((i-=e[t])<0){l=t;break}}for(let n=0;n<l;n+=1)s[n].parentElement===t?e[n]=s[n].offsetWidth:t.insertBefore(s[n],o);for(let e=l;e<s.length;e+=1)n.appendChild(s[e]);o.style.display=l===s.length?"none":""}setTimeout((()=>{E=c.map((e=>e.offsetWidth)),y(E,l,h,c,g),function(e,t=!1){t&&e(),r.push(p(e))}((()=>{y(E,l,h,c,g)}))}),10),setTimeout((()=>{i.classList.add("ready")}),100),d&&(!function(e,t=!1){t&&e(),u.push(p(e))}((()=>{!function(e,t){const n=t.getBoundingClientRect();(n.bottom<0||0<n.top&&n.bottom<Math.abs(window.pageYOffset-a))&&w(e,t)}(g,L)})),document.addEventListener("click",(()=>{w(g,L)})))};
//# sourceMappingURL=priority.min.js.map