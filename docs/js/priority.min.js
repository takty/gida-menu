"use strict";window.GIDA=window.GIDA??{},window.GIDA.menu_priority=function(e,t){const n="gida-menu-priority",s="active",o="opened",i=e?document.getElementById(e):document.getElementsByClassName(n)[0];if(!i)return;const c=i.querySelector(".menu")??i.getElementsByTagName("ul")[0],l=Array.from(c.querySelectorAll("li")),a=t.autoClose??!0;let r=0;const d=[],u=[];const m=[];function f(e){if(e.scrollWidth-e.clientWidth>2){const t=e.scrollLeft/(e.scrollWidth-e.clientWidth);e.classList[t<.95?"add":"remove"]("scrollable-right"),e.classList[.05<t?"add":"remove"]("scrollable-left")}else e.classList.remove("scrollable-right"),e.classList.remove("scrollable-left")}function p(e){let t;function n(){t=!1,e()}return()=>{t||(t=!0,requestAnimationFrame(n))}}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const e of d)e()}),{passive:!0}),window.addEventListener("scroll",(()=>{for(const e of u)e()}),{passive:!0}),function(){const e=new ResizeObserver((e=>{for(const t of e)f(t.target)}));for(const t of m)e.observe(t),t.addEventListener("scroll",p((()=>{f(t)})))}()}));const[L,g]=function(e){const t=document.createElement("div");t.classList.add("gida-menu-priority-panels");const n=document.createElement("div");n.classList.add("gida-menu-priority-panel");const s=document.createElement("ul");return s.classList.add("menu"),n.appendChild(s),t.appendChild(n),e.appendChild(t),[n,s]}(i),[v,h]=function(e){const t=document.createElement("button");t.classList.add("gida-menu-priority-button");const n=document.createElement("li");return n.appendChild(t),e.appendChild(n),[n,t]}(c);c.appendChild(v),h.addEventListener("click",(e=>{v.classList.contains(o)?w(v,L):function(e,t){e.classList.add(o),t.classList.add(s),setTimeout((()=>{t.classList.add(o)}),0),r=window.pageYOffset}(v,L),e.stopPropagation()}));for(const e of l)e.addEventListener("click",(()=>{w(v,L)}));!function(e,t,n){const s=e=>{"mouse"!==e.pointerType||e.target.classList.contains(t)||e.target.classList.add(n)},o=e=>{"mouse"!==e.pointerType||e.target.classList.contains(t)||e.target.classList.remove(n)};for(const t of e)t.addEventListener("pointerenter",s),t.addEventListener("pointerleave",o)}(l,"current","hover");let E=[];function w(e,t){e.classList.remove(o),t.classList.remove(s),setTimeout((()=>{t.classList.remove(o)}),400)}function y(e,t,n,s,o){let i=t.parentElement.getBoundingClientRect().width,c=s.length;const l=o.clientWidth;if(i<e.reduce(((e,t)=>e+t))){i-=l;for(let t=0;t<e.length;t+=1)if((i-=e[t])<0){c=t;break}}for(let n=0;n<c;n+=1)s[n].parentElement===t?e[n]=s[n].offsetWidth:t.insertBefore(s[n],o);for(let e=c;e<s.length;e+=1)n.appendChild(s[e]);o.style.display=c===s.length?"none":""}setTimeout((()=>{E=l.map((e=>e.offsetWidth)),y(E,c,g,l,v),function(e,t=!1){t&&e(),d.push(p(e))}((()=>{y(E,c,g,l,v)}))}),10),setTimeout((()=>{i.classList.add("ready")}),100),a&&(!function(e,t=!1){t&&e(),u.push(p(e))}((()=>{!function(e,t){const n=t.getBoundingClientRect();(n.bottom<0||0<n.top&&n.bottom<Math.abs(window.pageYOffset-r))&&w(e,t)}(v,L)})),document.addEventListener("click",(()=>{w(v,L)})))};
//# sourceMappingURL=priority.min.js.map